(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13e4427c"],{"1ba6":function(t,e,a){},"7ea2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article"},[a("div",{staticClass:"article_top"},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.toAddHandler}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.batchDelect}},[t._v("批量删除")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{staticClass:"reset",attrs:{size:"medium",offset:2},on:{click:t.resetData}},[t._v("重置")])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block",attrs:{offset:"10"}},[a("el-date-picker",{attrs:{"unlink-panels":"",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入标题关键字"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择栏目",clearable:""},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}},t._l(t.categories,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),t._v(" "),a("div",{staticClass:"article_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.article,size:"small"},on:{"selection-change":t.selectionChangeHandler}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"文章标题",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"category.name",label:"所属栏目",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"author.nickname",label:"作者",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"publishtime",label:"发布时间",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"readtimes",label:"阅读次数",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"详情",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.toArticleDetailsHandler(i.id)}}},[t._v("查看")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("i",{staticClass:"fa fa-trash",on:{click:function(e){return t.deleteHandler(i.id)}}}),t._v(" \n\t      \t\t"),a("i",{staticClass:"fa fa-pencil",on:{click:function(e){return t.toEditHandler(i)}}})]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"85%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px",model:t.articleForm}},[a("el-form-item",{attrs:{label:"文章标题"}},[a("el-input",{model:{value:t.articleForm.title,callback:function(e){t.$set(t.articleForm,"title",e)},expression:"articleForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属栏目"}},[a("el-select",{attrs:{placeholder:"请选择所属栏目"},model:{value:t.articleForm.categoryId,callback:function(e){t.$set(t.articleForm,"categoryId",e)},expression:"articleForm.categoryId"}},t._l(t.categories,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"文章作者"}},[a("el-select",{attrs:{placeholder:"请选择文章作者"},model:{value:t.articleForm.userId,callback:function(e){t.$set(t.articleForm,"userId",e)},expression:"articleForm.userId"}},t._l(t.editors,(function(t){return a("el-option",{key:t.id,attrs:{label:t.nickname,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"正文"}},[a("mavon-editor",{ref:"articleContent",model:{value:t.articleForm.content,callback:function(e){t.$set(t.articleForm,"content",e)},expression:"articleForm.content"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.toSaveHandler}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"文章详情",width:"50%",visible:t.detailsVisible},on:{"update:visible":function(e){t.detailsVisible=e}}},[a("el-form",{attrs:{data:t.articleDetails}},[a("span",{staticClass:"none"},[t._v(t._s(t.articleDetails))]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"文章标题："}},[a("span",[t._v(t._s(t.articleDetails.title))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"文章作者："}},[t.articleDetails.author?a("span",[t._v(t._s(t.articleDetails.author.nickname))]):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所属栏目："}},[t.articleDetails.category?a("span",[t._v(t._s(t.articleDetails.category.name))]):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"阅读次数："}},[a("span",[t._v(t._s(t.articleDetails.readtimes))])])],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"状态："}},[a("span",[t._v(t._s(t.articleDetails.status))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"发布时间："}},[a("span",[t._v(t._s(t.articleDetails.publishtime))])])],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"点赞次数："}},[a("span",[t._v(t._s(t.articleDetails.thumbup))])])],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"被踩次数："}},[a("span",[t._v(t._s(t.articleDetails.thumbdown))])])],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"评论状态："}},[a("el-switch",{attrs:{"active-color":"#1296db","inactive-color":"#cdcdcd"},on:{change:function(e){return t.changeCommentStatus(t.articleDetails)}},model:{value:t.commentStatus,callback:function(e){t.commentStatus=e},expression:"commentStatus"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"文章正文："}},[a("span",[t._v(t._s(t.articleDetails.content))])])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.auditHandler(t.articleDetails.id)}}},[t._v("通过审核")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.detailsVisible=!1}}},[t._v("返 回")])],1)],1),t._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":this.pageSize,total:this.total},on:{"current-change":t.handleCurrentChange}})],1)],1)])},l=[],r=(a("5ab2"),a("6d57"),a("e10e"),a("289c")),s=a("52c1");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={data:function(){return{page:0,pageSize:5,categoryId:null,multipleSelection:[],dialogVisible:!1,detailsVisible:!1,title:"",articleForm:{liststyle:"true"},time:[],keywords:"",commentStatus:!0}},created:function(){var t={page:this.page,pageSize:this.pageSize,categoryId:this.categoryId};this.loadArticle(t),this.loadCategories(),this.findAllEditor()},computed:n({},Object(s["d"])("Article",["article","total","categories","articleDetails","editors"])),methods:n({},Object(s["b"])("Article",["loadArticle","saveOrUpDateArticle","deleteArticleById","batchDelectArticle","loadCategories","findArticleById","checkArticle","findAllEditor"]),{handleCurrentChange:function(t){this.page=t-1;var e=this.time[0],a=this.time[1],i={page:this.page,pageSize:this.pageSize,beginTime:e,endTime:a,keywords:this.keywords,categoryId:this.categoryId};this.loadArticle(i)},toAddHandler:function(){this.dialogVisible=!0,this.title="添加文章",this.articleForm={liststyle:"style-one"}},toEditHandler:function(t){var e={id:t.id,title:t.title,userId:t.author.id,categoryId:t.category.id,liststyle:t.liststyle,publishtime:t.publishtime,readtimes:t.readtimes,status:t.status,thumbup:t.thumbup,thumbdown:t.thumbdown,content:t.content};this.title="修改文章",this.articleForm=e,this.dialogVisible=!0},toSaveHandler:function(){var t=this;this.dialogVisible=!1,this.saveOrUpDateArticle(this.articleForm).then((function(e){var a={page:t.page,pageSize:t.pageSize,categoryId:t.categoryId};t.loadArticle(a),t.$message({type:"success",message:"操作成功"})}))},deleteHandler:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteArticleById(t).then((function(){e.$notify.success({title:"成功",message:"删除成功！"});var t={page:e.page,pageSize:e.pageSize,categoryId:e.categoryId};e.loadArticle(t)})).catch((function(){e.$notify.error({title:"错误",message:"删除失败！"})}))}))},batchDelect:function(){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.multipleSelection.map((function(t){return t.id}));t.batchDelectArticle({ids:e}).then((function(){t.$notify.success({title:"成功",message:"删除成功！"});var e={page:t.page,pageSize:t.pageSize,categoryId:t.categoryId};t.loadArticle(e)})).catch((function(){t.$notify.error({title:"错误",message:"删除失败！"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},selectionChangeHandler:function(t){this.multipleSelection=t},resetData:function(){this.categoryId=null,this.keywords="",this.time=[];var t={page:0,pageSize:this.pageSize};this.loadArticle(t)},toArticleDetailsHandler:function(t){this.findArticleById(t),this.detailsVisible=!0},auditHandler:function(t){var e=this,a={id:t,status:"审核通过"};this.checkArticle(a).then((function(a){var i=a.data.status;if(200===i){e.findArticleById(t);var l={page:e.page,pageSize:e.pageSize,categoryId:e.categoryId};e.loadArticle(l),e.$notify.success({title:"成功",message:"审核成功！"})}else e.$notify.error({title:"错误",message:"重复审核！"})}))},changeCommentStatus:function(t){var e=this,a={id:t.id,title:t.title,userId:t.author.id,categoryId:t.category.id,liststyle:this.commentStatus,publishtime:t.publishtime,readtimes:t.readtimes,status:t.status,thumbup:t.thumbup,thumbdown:t.thumbdown,content:t.content};this.saveOrUpDateArticle(a).then((function(a){var i=a.data.status;if(200===i){e.findArticleById(t.id);var l={page:e.page,pageSize:e.pageSize};e.loadArticle(l),e.$notify.success({title:"成功",message:"更改成功！"})}else e.$notify.error({title:"错误",message:"更改失败！"})}))}}),watch:{categoryId:function(t,e){var a=this.time[0],i=this.time[1],l={page:0,pageSize:5,beginTime:a,endTime:i,keywords:this.keywords,categoryId:this.categoryId};console.log(l),this.loadArticle(l)},time:function(t,e){var a=this.time[0],i=this.time[1],l={page:0,pageSize:5,beginTime:a,endTime:i,keywords:this.keywords,categoryId:this.categoryId};this.loadArticle(l)},keywords:function(t,e){var a=this.time[0],i=this.time[1],l={page:0,pageSize:5,beginTime:a,endTime:i,keywords:this.keywords,categoryId:this.categoryId};this.loadArticle(l)}}},d=c,u=(a("f3ef"),a("5511")),m=Object(u["a"])(d,i,l,!1,null,null,null);e["default"]=m.exports},f3ef:function(t,e,a){"use strict";var i=a("1ba6"),l=a.n(i);l.a}}]);